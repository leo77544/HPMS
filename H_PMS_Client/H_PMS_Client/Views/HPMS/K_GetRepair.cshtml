

<div class="main-content" style="margin-left:0px;" id="kevin_addemp">
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
        </script>

        <ul class="breadcrumb">
            <li>
                <i class="icon-home home-icon"></i>
                <a href="#">首页</a>
            </li>
            <li class="active">安居客控制台</li>
            <li class="active">报修管理</li>
            <li class="active">提交报修</li>
        </ul><!-- .breadcrumb -->
    </div>
    <style>
        td {
            border: 1px solid;
            vertical-align: middle;
            text-align: center;
        }

        #wxtd {
            width: 100px;
        }

        #wxtd2 {
            width: 250px;
            font-size: 20px;
        }
    </style>
    <div class="page-content">
        <div class="row">
            <div style="height:30px;margin-left:30px;margin-top:10px;">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-2" style="padding-left:300px;"> 查看报修明细 </label>
                <select id="SelPlotName" style="width:150px;cursor:pointer;">
                    <option value="0">请选择</option>
                    <option value="1">未解决</option>
                    <option value="2">已解决</option>
                </select>
            </div>
            <div id="RepShowAll"></div>
        </div><!-- /row -->
        <div class="box" id="box" style="width:250px;height:80px;z-index:1024;font-size:24px;font-family:微软雅黑;line-height:80px;padding-left:75px;background-color:#bcf5c2;float:left;margin-left:40%;color:#159753;display:none">添加成功！</div>

        <div id="myModal" class="bg-model" style="position:absolute;top:0%;left:0%;display:none;background:rgba(0,0,0,0.3);width:100%;height:100%;position:fixed;z-index:9999">
            <div class='content' style="position: absolute;left: 25%;top: 15%;border-radius: 10px;width:850px;height:580px;background-color: #fff;">
                <div style="height:80px;line-height:80px;">
                    <h2 style="margin-left:310px;">----修改报修单据----</h2>
                </div>
                <table style="width:750px;height:350px;vertical-align:middle;border:2px solid;margin:auto">
                    <tr>
                        <td id="wxtd">维修单据：</td>
                        <td id="wxtd2" colspan="3">
                            <span id="gmReNumber" style="color:#8a8888"></span>
                        </td>
                    </tr>
                    <tr>
                        <td id="wxtd">房主姓名：</td>
                        <td id="wxtd2">
                            <span id="gmHostName" style="color:#8a8888"></span>
                        </td>
                        <td id="wxtd">报修日期：</td>
                        <td id="wxtd2">
                            <span id="gmRSTime" style="color:#8a8888"></span>
                        </td>
                    </tr>
                    <tr>
                        <td id="wxtd">维修内容：</td>
                        <td id="wxtd2" colspan="3">
                            <input id="gmReRemark" type="text" style="width:600px;border:0px" />
                        </td>
                    </tr>
                    <tr>
                        <td id="wxtd">维修人员：</td>
                        <td id="wxtd2">
                            <select id="gmMaintainName">
                                <option value="0">==请选择技工==</option>
                            </select>
                        </td>
                        <td id="wxtd">维修日期：</td>
                        <td id="wxtd2">
                            <input type="text" id="gmMaintainTime" onclick="WdatePicker()" style="width:250px;border:0px" class="col-xs-10 col-sm-5" />
                        </td>
                    </tr>
                    <tr>
                        <td id="wxtd">物料费用：</td>
                        <td id="wxtd2">
                            <input id="gmGoodsPrice" type="text" style="width:250px;border:0px" />
                        </td>
                        <td id="wxtd">服务费用：</td>
                        <td id="wxtd2">
                            <input id="gmServePrice" type="text" style="width:250px;border:0px" />
                        </td>
                    </tr>
                    <tr>
                        <td id="wxtd">备注：</td>
                        <td id="wxtd2" colspan="3">
                            <input id="gmEstimate" type="text" style="width:600px;border:0px;color:red" />
                        </td>
                    </tr>
                </table>
                <div class="clearfix form-actions">
                    <div class="col-md-offset-3 col-md-9" style="margin-left:270px;">
                        <button class="btn btn-info" type="button" onclick="uptREP()">
                            <i class="icon-ok bigger-110"></i>
                            提交修改
                        </button>
                        &nbsp; &nbsp; &nbsp;
                        <button class="btn" type="reset" onclick="quxiaouptREP()">
                            <i class="icon-undo bigger-110"></i>
                            取消操作
                        </button>
                    </div>
                </div>
            </div>

            @*<div style="width:750px;height:350px;float:left;color: '#249ded';margin-left:20px;margin-top:20px;background-color:'#438eb9 '">
                    <table style="width:1000px;height:350px;vertical-align:middle;border:2px solid">
                        <tr>
                            <td id="wxtd">维修单据：</td>
                            <td id="wxtd2" colspan="3">' + this.ReNumber + '</td>
                        </tr>
                        <tr><td id="wxtd">房主姓名：</td><td id="wxtd2">' + this.HostName + '</td><td id="wxtd">报修日期：</td><td id="wxtd2">' + this.RSTime + '</td></tr>
                        <tr><td id="wxtd">维修内容：</td><td id="wxtd2" colspan="3">' + this.ReRemark + '</td></tr>
                        <tr><td id="wxtd">维修人员：</td><td id="wxtd2">' + this.MaintainName + '</td><td id="wxtd">维修日期：</td><td id="wxtd2">' + this.MaintainTime + '</td></tr>
                        <tr><td id="wxtd">服务费用：</td><td id="wxtd2">' + this.ReNumber + '</td><td id="wxtd">服务费用：</td><td id="wxtd2">' + this.ReNumber + '</td></tr>
                        <tr><td id="wxtd">备注：</td><td id="wxtd2" colspan="3">' + this.Estimate + '</td></tr>
                    </table>
                </div>*@

        </div><!-- /.page-content -->
    </div>
    <script>
        var getputRepairId;
        var getputHouseId;
        GetRepAllCNM();
        function GetRepAllCNM() {
            $.ajax({
                url: "/HPMS/GetRepByLX/?lx=0",
                success: function (data) {
                    $("#RepShowAll").empty();
                    $(JSON.parse(data)).each(function () {
                        $("#RepShowAll").append(' <div style="width:750px;height:350px;color:' + (this.Estimate == "未解决" ? "#249ded" : "#ffffff") + ';float:left;margin-left:20px;margin-top:20px;background-color:' + (this.Estimate == "未解决" ? "#dff0d8" : "#438eb9") + '" data-toggle="modal" data-target="#myModal" onclick="' + (this.Estimate == "未解决" ? "getModalNoRepShow( " + this.RepairId + "," + this.HostName + "," + this.HouseId + "," + this.ReNumber + "," + this.MaintainName + "," + this.RSTime + "," + this.MaintainTime + "," + this.ServePrice + "," + this.GoodsPrice + "," + this.Estimate + "," + this.ReRemark + ")" : "getModalOKRepShow( " + this.RepairId + "," + this.HostName + "," + this.HouseId + "," + this.ReNumber + "," + this.MaintainName + "," + this.RSTime + "," + this.MaintainTime + "," + this.ServePrice + "," + this.GoodsPrice + "," + this.Estimate + "," + this.ReRemark + ")") + '"><table style="width:1000px;height:350px;vertical-align:middle;border:2px solid"><tr><td id="wxtd">维修单据：</td><td id="wxtd2" colspan="3">' + this.ReNumber + '</td></tr><tr><td id="wxtd">房主姓名：</td><td id="wxtd2">' + this.HostName + '</td><td id="wxtd">报修日期：</td><td id="wxtd2">' + this.RSTime + '</td></tr><tr><td id="wxtd">维修内容：</td><td id="wxtd2" colspan="3">' + this.ReRemark + '</td></tr><tr><td id="wxtd">维修人员：</td><td id="wxtd2">' + this.MaintainName + '</td><td id="wxtd">维修日期：</td><td id="wxtd2">' + this.MaintainTime + '</td></tr><tr><td id="wxtd">服务费用：</td><td id="wxtd2">' + this.ReNumber + '</td><td id="wxtd">服务费用：</td><td id="wxtd2">' + this.ReNumber + '</td></tr><tr ><td id="wxtd">备注：</td><td id="wxtd2" colspan="3">' + this.Estimate + '</td></tr ></table></div>');
                    })
                }
            })
        }
        $("#SelPlotName").change(function () {
            $.ajax({
                url: "/HPMS/GetRepByLX/?lx=" + $("#SelPlotName").val(),
                success: function (data) {
                    $("#RepShowAll").empty();
                    $(JSON.parse(data)).each(function () {
                        $("#RepShowAll").append(' <div style="width:750px;height:350px;float:left;color:' + (this.Estimate == "未解决" ? "#249ded" : "#ffffff") + ';margin-left:20px;margin-top:20px;background-color:' + (this.Estimate == "未解决" ? "#dff0d8" : "#438eb9") + '" data-toggle="modal" data-target="#myModal" onclick="' + (this.Estimate == "未解决" ? "getModalNoRepShow( " + this.RepairId + "," + this.HostName + "," + this.HouseId + "," + this.ReNumber + "," + this.MaintainName + "," + this.RSTime + "," + this.MaintainTime + "," + this.ServePrice + "," + this.GoodsPrice + "," + this.Estimate + "," + this.ReRemark + ")" : "getModalOKRepShow( " + this.RepairId + "," + this.HostName + "," + this.HouseId + "," + this.ReNumber + "," + this.MaintainName + "," + this.RSTime + "," + this.MaintainTime + "," + this.ServePrice + "," + this.GoodsPrice + "," + this.Estimate + "," + this.ReRemark + ")") + '"><table style="width:1000px;height:350px;vertical-align:middle;border:2px solid"><tr><td id="wxtd">维修单据：</td><td id="wxtd2" colspan="3">' + this.ReNumber + '</td></tr><tr><td id="wxtd">房主姓名：</td><td id="wxtd2">' + this.HostName + '</td><td id="wxtd">报修日期：</td><td id="wxtd2">' + this.RSTime + '</td></tr><tr><td id="wxtd">维修内容：</td><td id="wxtd2" colspan="3">' + this.ReRemark + '</td></tr><tr><td id="wxtd">维修人员：</td><td id="wxtd2">' + this.MaintainName + '</td><td id="wxtd">维修日期：</td><td id="wxtd2">' + this.MaintainTime + '</td></tr><tr><td id="wxtd">服务费用：</td><td id="wxtd2">' + this.ReNumber + '</td><td id="wxtd">服务费用：</td><td id="wxtd2">' + this.ReNumber + '</td></tr><tr ><td id="wxtd">备注：</td><td id="wxtd2" colspan="3">' + this.Estimate + '</td></tr ></table></div>');
                    })
                }
            })
        })

        function getModalNoRepShow(RepairId, HostName, HouseId, ReNumber, MaintainName, RSTime, MaintainTime, ServePrice, GoodsPrice, Estimate, ReRemark) {
            alert(HostName);
            getputRepairId = RepairId;
            getputHouseId = HouseId;
            $("#gmReNumber").text = ReNumber;
            $("#gmHostName").text = HostName;
            $("#gmMaintainName").text = MaintainName;

            $("#gmRSTime").val(RSTime);
            $("#gmMaintainTime").val(MaintainTime);
            $("#gmServePrice").val(ServePrice);
            $("#gmGoodsPrice").val(GoodsPrice);
            $("#gmEstimate").val(Estimate);
            $("#gmReRemark").val(ReRemark);


        }

        function getModalOKRepShow(RepairId, HostName, HouseId, ReNumber, MaintainName, RSTime, MaintainTime, ServePrice, GoodsPrice, Estimate, ReRemark) {
            getputRepairId = RepairId;
            getputHouseId = HouseId;
            $("#gmReNumber").text = ReNumber;
            $("#gmHostName").text = HostName;
            $("#gmMaintainName").text = MaintainName;

            $("#gmRSTime").val(RSTime);
            $("#gmMaintainTime").val(MaintainTime);
            $("#gmServePrice").val(ServePrice);
            $("#gmGoodsPrice").val(GoodsPrice);
            $("#gmEstimate").val(Estimate);
            $("#gmReRemark").val(ReRemark);


        }
    </script>

    <script>
        //显示模态框点击事件
        $(".cart-add").click(function () {
            $(".bg-model").fadeTo(300, 1)
            //隐藏窗体的滚动条
            $("body").css({ "overflow": "hidden" });
        });

        //模态框OK按钮点击事件
        $(".bg-model-ok").click(function () {
            $(".bg-model").hide();
            //显示窗体的滚动条
            $("body").css({ "overflow": "visible" });
        }).hover(function () {
            $(this).css({ "backgroundColor": "#8CC8C8" });
        }, function () {
            $(this).css({ "backgroundColor": "#8CD4E6" });
        });
    </script>
